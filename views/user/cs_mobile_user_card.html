<!doctype html>
<html lang=ko>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">

    <!-- css -->
    <link rel="stylesheet" href="../../resources/lib/jquery-ui-1.13.2/jquery-ui-1.13.2.css">
    <link rel="stylesheet" href="../../resources/lib/swiper/swiper.css">
    <link rel="stylesheet" href="../../resources/css/main.css">

    <!-- lib -->
    <script src="../../resources/lib/jquery-3.6.1/jquery-3.6.1.js"></script>
    <script src="../../resources/lib/jquery-ui-1.13.2/jquery-ui-1.13.2.js"></script>
    <script src="../../resources/lib/swiper/swiper.js"></script>

    <!-- js -->
    <script src="../../resources/js/main.js"></script>

    <title>모바일 회원카드</title>
</head>
<body data-text-size="normal">
<!-- [웹 접근성] : 본문 바로가기 -->
<a href="#main" id="skip-nav">본문 바로가기</a>

<!-- [공통] 글자 텍스트 아이콘 -->
<div class="fixed-btn-wrap">
    <button type="button" class="txt-size-btn sm"><span class="visually-hidden">글씨 크게 보기</span></button>
    <button type="button" class="txt-size-btn rg active"><span class="visually-hidden">글씨 보통 보기</span></button>
    <button type="button" class="txt-size-btn lg"><span class="visually-hidden">글씨 크게 보기</span></button>
</div>

<!-- [모달 팝업] : 모바일 회원카드 -->
<div id="modal-onlineUserCard" class="modal">
    <div class="modal-content mobile-rotate">
        <div class="title-wrap">
            <h3>모바일 회원카드</h3>
            <button type="button" onclick="hideModal('modal-onlineUserCard')" class="close-btn"><span class="visually-hidden">닫기</span></button>
        </div>
        <div class="modal-body">
            <div class="flex-wrap col-ver bc-box gap-auto">
                <p class="bc-pl-tit">올림픽수영장</p>
                <p class="bc-user-name">홍길동</p>
                <p class="bc-user-num">회원번호: 2506002455</p>
                <div class="bc-img-box">
                    <img src="../../resources/img/subPage/bgimg.png" alt="바코드 임시 이미지"/>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- 헤더 -->
<header>
    <!-- [사이드바] dim 처리 영역 -->
    <div id="dim-overlay" class="dim"></div>
    <div class="content-wrap">
        <h1>
            <a href="../user/main.html">
                <img src="../../resources/img/common/kspo_logo.svg" alt="한국체육산업개발주식회사 수강신청" />
            </a>
        </h1>
        <nav class="sidebar">
            <!-- pc 에서의 gnb -->
            <ul class="pc-only-f">
                <li><a href="../user/cs_center_join.html">센터가입</a></li>
                <li><a href="../user/cs_course_registration.html">수강신청</a></li>
                <li><a href="../user/cs_mobile_user_card.html">모바일 회원카드</a></li>
                <li><a href="#">이용안내</a></li>
            </ul>
            <!-- mobile 에서의 gnb -->
            <div class="sidebar-title-wrap mobile-only-f">
                <button type="button" class="user-btn">로그인</button>
                <button type="button" class="close-btn"><span class="visually-hidden">닫기</span></button>
            </div>
            <div class="sidebar-menu-wrap">
                <ul class="sidebar-list mobile-only">
                    <li><a href="../user/cs_mobile_user_card.html">모바일 회원카드</a></li>
                    <li><a href="../user/cs_center_join.html">센터가입</a></li>
                    <li><a href="../user/cs_course_registration.html">수강신청</a></li>
                    <li><a href="../user/cs_shopping_cart.html">장바구니</a></li>
                    <li><a href="../user/cs_payment_history.html">결제내역</a></li>
                    <li><a href="#">이용안내</a></li>
                </ul>
            </div>
        </nav>
        <div class="btn-wrap pc-only-f">
            <a href="#" class="ico-user"><span>로그인</span></a>
            <a href="../user/cs_shopping_cart.html" class="ico-bag"><span>장바구니</span></a>
            <a href="../user/cs_payment_history.html" class="ico-pay"><span>결제내역</span></a>
        </div>
        <div class="btn-wrap sm mobile-only-f">
            <a href="#" class="ico-btn ico-user"><span class="visually-hidden">로그인</span></a>
            <a href="#" class="ico-btn ico-bc"><span class="visually-hidden">바코드</span></a>
            <button type="button" class="ico-btn ico-hamburger"><span class="visually-hidden">메뉴 열기</span></button>
        </div>
    </div>
</header>

<!-- 메인 -->
<main id="main">
    <div class="inner-wrap">
        <div class="title-wrap sub-ver">
            <h2>모바일 회원카드</h2>
            <p>센터 이름을 클릭하시면 모바일 회원카드를 확인하실 수 있습니다.</p>
        </div>
        <div class="content-box lg">
            <div class="flex-wrap mo-col online-card-wrap">
                <button type="button" class="main-con-box blue type7" onclick="showModal('modal-onlineUserCard')">
                    <span class="title-wrap">
                        <span class="h4">스포츠 교실</span>
                        <span class="link-btn"></span>
                    </span>
                </button>
                <button type="button" class="main-con-box orange type8" onclick="showModal('modal-onlineUserCard')">
                    <span class="title-wrap">
                        <span class="h4">일산스포츠센터</span>
                        <span class="link-btn"></span>
                    </span>
                </button>
                <button type="button" class="main-con-box green type9" onclick="showModal('modal-onlineUserCard')">
                    <span class="title-wrap">
                        <span class="h4">분당스포츠센터</span>
                        <span class="link-btn"></span>
                    </span>
                </button>
                <button type="button" class="main-con-box purple type10" onclick="showModal('modal-onlineUserCard')">
                    <span class="title-wrap">
                        <span class="h4">올림픽수영장</span>
                        <span class="link-btn"></span>
                    </span>
                </button>
                <button type="button" class="main-con-box red type11" onclick="showModal('modal-onlineUserCard')">
                    <span class="title-wrap">
                        <span class="h4">축구장</span>
                        <span class="link-btn"></span>
                    </span>
                </button>
            </div>
            <div class="flex-wrap mo-j-start end al-end">
                <p class="txt-gray">원하시는 센터가<br>목록에 없으신가요?</p>
                <a href="#" class="arrow_link">센터가입하기</a>
            </div>
        </div>
    </div>
</main>
<script>
  /* 모바일 */
  $(document).ready(function () {
    const $hamburgerBtn = $('.ico-hamburger'); // 햄버거 버튼
    const $dimOverlay = $('#dim-overlay'); // Dim 처리 요소
    const $sidebar = $('.sidebar'); // 사이드바 메뉴
    const $closeBtn = $('.close-btn'); // 닫기 버튼
    const breakpoint = 1200; // PC와 모바일을 구분할 기준 너비

    // 햄버거 버튼 클릭 이벤트
    $hamburgerBtn.on('click', function () {
      if ($(window).width() < breakpoint) {
        // 모바일 화면일 때만 active 클래스 추가
        $dimOverlay.addClass('active');
        $sidebar.addClass('active');
        $('body').addClass('no-scroll'); // 뒷배경 스크롤 방지
      }
    });

    // 사이드바 닫기 버튼 클릭 이벤트
    $closeBtn.on('click', function () {
      removeActiveClasses();
    });

    // Dim 영역 클릭 시 사이드바 닫기
    $dimOverlay.on('click', function () {
      removeActiveClasses();
    });

    // 윈도우 리사이즈 이벤트
    $(window).on('resize', function () {
      if ($(window).width() >= breakpoint) {
        // PC 모드로 전환되면 초기화
        removeActiveClasses();
      }
    });

    // 상태 초기화 함수
    function removeActiveClasses() {
      $dimOverlay.removeClass('active');
      $sidebar.removeClass('active');
      $('body').removeClass('no-scroll'); // 스크롤 가능하게
    }
  });

  /* 2. 모달관련 함수 */
  // 모달 관련 함수
  // function showModal(modalId) {
  //   const modal = document.getElementById(modalId);
  //   if (modal) {
  //     modal.style.display = 'block';
  //
  //     // 모바일 화면일 경우 (-90도 회전 클래스 추가)
  //     if (window.innerWidth <= 768) {
  //       modal.querySelector('.modal-content').classList.add('mobile-rotate');
  //     }
  //     // 스크롤 막기
  //     document.body.classList.add('no-scroll'); // body에 스크롤 방지 클래스 추가
  //
  //   }
  // }

  /* 2. 모달관련 함수 */
  // 모달 크기 조정 및 회전 처리
  function adjustModalSize(modalId) {
    const modal = document.getElementById(modalId);
    const modalContent = modal.querySelector('.modal-content');

    if (modalContent) {
      const viewportHeight = window.innerHeight; // 화면 높이
      const viewportWidth = window.innerWidth;   // 화면 너비

      if (viewportWidth <= 768) {
        // 모바일 화면: 가로/세로 교차 및 회전 적용
        modalContent.style.width = `${viewportHeight - 32}px`; // 여백 포함
        modalContent.style.height = `${viewportWidth - 32}px`; // 여백 포함
        modalContent.style.transform = 'translate(-50%, -50%) rotate(-90deg)'; // 모바일은 회전 적용
        modalContent.style.transformOrigin = 'center'; // 회전 중심
        modalContent.style.borderRadius = '8px'; // 둥근 모서리 제거
        modalContent.style.padding = '60px 0 0 0'; // 모바일에서 추가 여백
      } else {
        // PC 화면: 스타일 초기화 및 기존 설정
        modalContent.style.width = '90%'; // 기본 너비
        modalContent.style.maxWidth = '800px'; // 최대 너비
        modalContent.style.height = 'auto'; // 높이 자동
        modalContent.style.transform = 'translate(-50%, -50%)'; // 기본 위치
        modalContent.style.borderRadius = '8px'; // 둥근 모서리 추가
        modalContent.style.padding = '64px 0 0 0'; // 기존 여백 유지
      }
    }
  }

  // 창 크기 변경 시 모달 크기 재조정
  window.addEventListener('resize', () => {
    const openModal = document.querySelector('.modal[style*="block"]'); // 현재 열린 모달 찾기
    if (openModal) {
      adjustModalSize(openModal.id); // 크기 재조정 호출
    }
  });


  // 모달 띄우기 함수
  function showModal(modalId) {
    const modal = document.getElementById(modalId);
    if (modal) {
      adjustModalSize(modalId); // 크기 조정 로직 호출
      modal.style.display = 'block'; // 모달 표시
      document.body.classList.add('no-scroll'); // 스크롤 방지
    }
  }


  function hideModal(modalId) {
    const modal = document.getElementById(modalId);
    if (modal) {
      modal.style.display = 'none';

      // 모바일 화면 회전 클래스 제거
      modal.querySelector('.modal-content').classList.remove('mobile-rotate');
      // 스크롤 막기
      document.body.classList.remove('no-scroll'); // body에 스크롤 허용

    }
  }

  /* 외부 클릭시 팝업 닫힘 */
  let openModalName = '' // 열린 팝업이름 저장
  window.onclick = function (event) {
    const modals = document.querySelectorAll('.modal'); // 모든 모달 탐색

    for (let modal of modals) {
      // 클릭된 요소가 현재 모달 요소인 경우
      if (event.target === modal) {
        // 해당 모달 숨기기
        modal.style.display = 'none';

        // 열린 팝업 이름과 연결된 추가 로직 처리
        hideModal(openModalName);
      }
    }
  };

</script>
</body>
</html>